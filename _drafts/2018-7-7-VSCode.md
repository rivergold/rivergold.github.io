# :fallen_leaf:Basics

- [VS Code 快捷键（中英文对照版）](https://segmentfault.com/a/1190000007688656)

## Open file in new window

- On windows/Linux, press `Ctrl` + `k`, then release the keys and press `o`
- On macOS, press `CMD` + `k`, then `o`

This will open the active file tab in a new window/instace.

**_References:_**

- [stackoverflow: Visual Studio Code open tab in new window](https://stackoverflow.com/questions/43362133/visual-studio-code-open-tab-in-new-window)

---

## Preview Mode

When in **preview mode**, file name is italic.

- `preview mode`: single-click file in sidebar
- `edit mode`: double-click file in sidebar or single-click it in the sidebar then double click the title

**_References:_**

- [stackoverflow: Open files always in a new tab](https://stackoverflow.com/questions/38713405/open-files-always-in-a-new-tab)

<!--  -->
<br>

---

<br>
<!--  -->

# :fallen_leaf:Code format

- Mac: `Shift` + `Option` + `F`
- Linux: `Ctrl` + `Shift` + `i`
- Windows: `Shift` + `Alt` + `F`

**_Ref:_** [stackoverflow: How do you format code in Visual Studio Code (VSCode)](https://stackoverflow.com/questions/29973357/how-do-you-format-code-in-visual-studio-code-vscode)

My `User settings`:

```json
// -----Formatting
"editor.formatOnSave": true,
// Cpp
"[cpp]": {
  "editor.defaultFormatter": "xaver.clang-format",
  "editor.tabSize": 2,
},
"C_Cpp.clang_format_style": "Google",
// Python
"python.formatting.provider": "yapf",
// -----
```

## Python

Using **yapf**, I think it's better than pep8.

**_References:_**

- [Google Python Style Guide: Background](http://google.github.io/styleguide/pyguide.html#1-background)
- [VSCode: Edit Python in Visual Studio Code](https://code.visualstudio.com/docs/python/editing#_formatterspecific-settings)

### Position of brace `{}` and parenthesis `()`

```python
# Aligned with opening delimiter
foo = long_function_name(var_one, var_two,
                         var_three, var_four)
meal = (spam,
        beans)
# Aligned with opening delimiter in a dictionary
foo = {
    long_dictionary_key: value1 +
                         value2,
    ...
}
# 4-space hanging indent; nothing on first line
foo = long_function_name(
    var_one, var_two, var_three,
    var_four)
meal = (
    spam,
    beans)
# 4-space hanging indent in a dictionary
foo = {
    long_dictionary_key:
        long_dictionary_value,
    ...
}
```

**注：** 圆括号需要追加在末尾，花口号可以在新的一行。

**_Ref:_** [Google Python Style Guide: 3.4 Indentation](http://google.github.io/styleguide/pyguide.html#34-indentation)

## C++

Using `clang-format` and set Google style.

In C++ file, indent size is 2. You need to set: `editor.detectIndentation` to `false`. And set:

```json
"[cpp]":{
  "editor.tabsize": 2,
}
```

**_Ref:_** [stackoverflow: How to change indentation in Visual Studio Code?](https://stackoverflow.com/a/45671704/4636081)

<!--  -->
<br>

---

<!--  -->

# :fallen_leaf:Linting

## Python

Use `pylint` for Google python style.

```json
"python.linting.pylintEnabled": true
```

**_Ref:_** [Google Python Style Guide: 2 Python Language Rules](http://google.github.io/styleguide/pyguide.html#21-lint)

## C++

Use vscode C/C++ extension.

### Config vscode use c++11

settings -> C++ -> choose cpp standard

**_References:_**

- [VSCode doc: Configure the compiler path](https://code.visualstudio.com/docs/cpp/config-clang-mac#_configure-the-compiler-path)
- [Github Gist BaReinhard/VSCodeCPPSetup.md: Setting Up VS Code for C++ 11](https://gist.github.com/BaReinhard/c8dc7feb8b0882d13a0cac9ab0319547)

<!--  -->
<br>

---

<br>
<!--  -->

# :fallen_leaf:Debug

## Change Python environments in VS Code

**_References:_**

- [Visual Studio Code Doc: Using Python environments in VS Code](https://code.visualstudio.com/docs/python/environments)

### Python Debugger

**_References:_**

- [Blog: 用 VScode 代码调试 Python](https://www.cnblogs.com/it-tsz/p/9022456.html)

<!--  -->
<br>

---

<br>
<!--  -->

# :fallen_leaf:Other Settings

<!-- ## Solve `pylint` cannot recognize `cv2`

```json
// Pylint
"python.linting.pylintArgs": [
    "--extension-pkg-whitelist=cv2"
],
```

Ref [stackoverflow: How do I get PyLint to recognize numpy members?](https://stackoverflow.com/questions/20553551/how-do-i-get-pylint-to-recognize-numpy-members)

**_References:_**

- [stackoverflow: PyLint not recognizing cv2 members](https://stackoverflow.com/a/51916065/4636081) -->

## VSCode ignore(exclude) some folder or files

1. `File` -> `Preferences` -> `Settings`
2. Pick `workspace settings`
3. Add files or folders you want to exclude into `file.exclude`

Ref [stackoverflow: How can I exclude a directory from Visual Studio Code “Explore” tab?](https://stackoverflow.com/questions/33258543/how-can-i-exclude-a-directory-from-visual-studio-code-explore-tab)

i.e.

```json
{
  "files.exclude": {
    "dataset/": true,
    "**/__pycache__/": true
  }
}
```

Note: `**` represent find partten recursive. `**/__pycache__` will match all folder named `__pycache__`.

Ref [VSCode doc: Advanced search options](https://code.visualstudio.com/docs/editor/codebasics#_advanced-search-options)

**_References:_**

- [Github microsoft/vscode: .pyc exclude not working #20458](https://github.com/Microsoft/vscode/issues/20458)

<!--  -->
<br>

---

<!--  -->

## Config different index size for different file format

You need do two steps:

1. Uncheck `Editor: Detect Indentation` in User Settings

2. Edit `settings.json`

   ```json
   "editor.tabSize": 4,
   "editordetectIndentation":false,
   "[markdown]": {
       "editor.tabSize": 2
   },
   "[C++]":{
       "editor.tabSize": 2
   },
   ```

Ref [stackoverflow: How to customize the tab-to-space conversion factor when using Visual Studio Code?](https://stackoverflow.com/a/43883133/4636081)

**_References:_**

- [Visual Studio Code Doc: User and Workspace Settings](https://code.visualstudio.com/docs/getstarted/settings#_settings-file-locations)

---

## :thumbsup:Solve Python autocomplete not work for `cv2`

My `opencv-python` is build from source, because I want to use FFMPEG with `x264`. The opencv-python install from `pip install opencv-python`'s FFMPEG is not with `x264`.

**Best solution of opencv-python with FFMPEG**

Follow this way, you don't need to build opencv-python from source.

1. pip install opencv-python
2. pip uninstall ffmpeg

VSCode intellisense fails for `cv2`, the reason is that VSCode autocomplete cannot find where is `cv2`. You need to add the `cv2` path into `"python.autoComplete.extraPaths"`

The `cv2` directory is

```shell
cv2
├── config-3.7.py
├── config.py
├── __init__.py
├── load_config_py2.py
├── load_config_py3.py
├── __pycache__
│   ├── __init__.cpython-37.pyc
│   └── load_config_py3.cpython-37.pyc
└── python-3.7
    └── cv2.cpython-37m-x86_64-linux-gnu.so
```

Edit your VSCode `settings.json`

```json
"python.autoComplete.extraPaths": [
    "<anaconda site-packages path>/cv2/python-3.7",
],
```

---

## Solve VSCode PyLint doesn't recognized `cv2`

Edit your VSCode `settings.json`

```json
"python.linting.pylintArgs": ["--generate-members=cv2.*"],
```

**_References:_**

- :thumbsup:[Github PyCQA/pylint: "Module 'numpy' has no ... member" error even with extension-pkg-whitelist=numpy set in pylint.rc #779](https://github.com/PyCQA/pylint/issues/779#issuecomment-533455857)
- [Github PyCQA/pylint: cv2 module members are not recognized #2426](https://github.com/PyCQA/pylint/issues/2426#issuecomment-541537420)

---

## Remove trailing spaces, same with Vim

`Settings` -> `Trim Trailing Whitespace`

**_References:_**

- [stackoverflow: Remove trailing spaces automatically or with a shortcut](https://stackoverflow.com/questions/30884131/remove-trailing-spaces-automatically-or-with-a-shortcut)

<!--  -->
<br>

---

<br>
<!--  -->

# :fallen_leaf:Extentions

- [知乎: 强大的 VS Code 入门](https://zhuanlan.zhihu.com/p/64779441?utm_source=ZHShareTargetIDMore&utm_medium=social&utm_oi=37839882420224)

## Setting Sync

### Shortcuts

**Linux**

- Upload settings: `shift` + `alt` + `u`

- Download settings: `shift` + `alt` + `D`

**macOS**

- Upload settings: `shift` + `option` + `u`

- Download settings: `shift` + `option` + `d`

**_References:_**

- [Settings Sync](https://marketplace.visualstudio.com/items?itemName=Shan.code-settings-sync)

<!--  -->
<br>

---

<!--  -->

## TODO-highlight & Tdo Tree

### Set color

Edit `settings.json`

```bash
// -----todo-highlight
"todohighlightkeywords": [{
    "text": "TODO:",
    "backgroundColor":"rgba(0, 0, 128,0.9)"
}]
// -----
```

Ref [Github wayou/vscode-todo-highlight: How to customize built-in colors? #18](https://github.com/wayou/vscode-todo-highlight/issues/18)

<!--  -->
<br>

---

<!--  -->

## Bookmarks

<!--  -->
<br>

---

<!--  -->

## Code Spell Checker

---

## C++

- C/C++ Clang Command Adapter

**_Ref:_** [知乎: Visual Studio Code 如何编写运行 C、C++ 程序？](https://www.zhihu.com/question/30315894)

---

## Remote Edit

### sftp

- :thumbsup:[liximomo/vscode-sftp](https://github.com/liximomo/vscode-sftp)

<!-- it's good but is out of date and has bug for latest vscode -->

- [humy2833/FTP-Simple](https://github.com/humy2833/FTP-Simple)

**vscode-sftp**

Press `F1` to config, here is an example:

```json
{
  "name": "name",
  "host": "remote ip",
  "protocol": "sftp",
  "port": <remote sftp port>,
  "username": "username",
  "remotePath": "/root/rivergold-project/pytorch",
  "uploadOnSave": true,
  "privateKeyPath": "/home/rivergold/.ssh/id_rsa",
  "ignore": [".vscode", ".git", ".DS_Store", ".pyc", ".so"]
}
```

<!-- **FTP-Simple**

Press `F1` to config, here is an example:

```json
[
  {
    "name": "server-PyTorch-Diving",
    "host": "",
    "port": 22,
    "type": "sftp",
    "username": "",
    "password": "",
    "path": "/root/rivergold-project/PyTorch-Diving",
    "autosave": true,
    "confirm": true,
    "privateKey": "/home/rivergold/.ssh/id_rsa",
    "project": {
      "/home/rivergold/Documents/RiverGold/rivergold-project/PyTorch-Diving": "/root/rivergold-project/PyTorch-Diving",
      "save": true
    }
  }
]
``` -->

<!--  -->
<br>

---

<br>
<!--  -->

# :fallen_leaf:Error

**_Ref:_** [Github microsoft/vscode-remote-release: Cannot connect to remote machine over ssh - no way to debug because the terminal is not kept open #243](https://github.com/microsoft/vscode-remote-release/issues/243#issuecomment-490765625)

```

```
