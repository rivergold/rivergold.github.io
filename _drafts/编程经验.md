# Callback Function

A callback function is a function which is:

- accessible by another function `F`, and

- is invoked in function `F`

> A "callback" is any function that is called by another function which takes the first function as a parameter.

**通俗理解:**

`A` tells `B` when some condition is met to call `C`.

`C` is the **callback function**. `A` may be `main` function, `B` accept `C` as parameter and call `C` when some condition is met.

主程序`A`告诉一个函数`B`在某种情况满足时下，请执行函数`C`。 函数`C`为回调函数。一般`C`会作为参数传递给`B`。

E.G.

Keras callback function during training

```python
reduce_lr = ReduceLROnPlateau(monitor='val_loss', factor=0.2,
                              patience=5, min_lr=0.001)
model.fit(X_train, Y_train, callbacks=[reduce_lr])
```

**_Ref:_** [Keras Documentation: Usage of callbacks](https://keras.io/callbacks/)

**_References:_**

- [stackoverflow: What is a callback function](https://stackoverflow.com/questions/824234/what-is-a-callback-function)

- [stackoverflow: How to explain callbacks in plain english? How are they different from calling one function from another function?](https://stackoverflow.com/questions/9596276/how-to-explain-callbacks-in-plain-english-how-are-they-different-from-calling-o/9652434#9652434)

- [知乎: 回调函数（callback）是什么？](https://www.zhihu.com/question/19801131/answer/27459821)

<!-- - [Blog: Using Python decorators for registering callbacks](http://curiosityhealsthecat.blogspot.com/2013/07/using-python-decorators-for-registering_8614.html) -->

<!--  -->
<br>

---

<br>
<!--  -->

# Hooking Mechanism

**形象的理解: 相当于插件, 为现有代码加入功能**

**_Ref:_** [知乎: pytorch 中的钩子（Hook）有何作用？](https://www.zhihu.com/question/61044004/answer/294829738)

## Relationship between Hook and Callback

Callback is a method to implement hook programming.

**_Ref:_** [stackoverflow: What is meant by the term “hook” in programming?](https://stackoverflow.com/a/467568/4636081)

<!-- **Hook: 拦截消息并进行处理的函数**

**理解:** 当某个消息被发出时，hook 会捕捉到该消息并进行执行某些代码。

**_References:_**

- [知乎: pytorch 中的钩子（Hook）有何作用？](https://www.zhihu.com/question/61044004)
- [CSDN: 钩子(hook)编程](https://blog.csdn.net/mingojiang/article/details/7908818)
- [简书: 程序猿口中的 Hook 是什么意思？](https://www.jianshu.com/p/0eeb3885b2e1) -->

## Example

**_Ref:_** [CSDN: python 学习之路--hook(钩子原理和使用)](https://blog.csdn.net/Mybigkid/article/details/78383898)

<!--  -->
<br>

---

<br>
<!--  -->

# Model Parallelism & Data Parallelism

- 模型并行（model parallelism）:分布式系统中的不同机器（GPU/CPU 等）负责网络模型的不同部分 —— 例如，神经网络模型的不同网络层被分配到不同的机器，或者同一层内部的不同参数被分配到不同机器

- 数据并行（ data parallelism ）：不同的机器有同一个模型的多个副本，每个机器分配到不同的数据，然后将所有机器的计算结果按照某种方式合并

**_Ref:_** [CSDN: 分布式机器学习系统笔记（一）——模型并行，数据并行，参数平均，ASGD](https://blog.csdn.net/xbinworld/article/details/74781605)

<!--  -->
<br>

---

<br>
<!--  -->

# C++ Pimpl

**Pointer to implementation**

## Blogs

- [CSDN: 编译防火墙——C++的 Pimpl 惯用法解析](https://blog.csdn.net/lihao21/article/details/47610309)

**总结:** 定义一个接口类，在接口类中有一个 private 的指针，该指针用于指向实现具体函数功能的类的 object。

- [ ] add an example

---

## C++ Code build dynamic library without third-party lib include files

**_References:_**

- [知乎: 如何写 C++代码，才能在封装成 Dll 的同时，自己程序包含的额外头文件不用加载进来？](https://www.zhihu.com/question/336227826/answer/757634065?hb_wx_block=0&utm_source=ZHShareTargetIDMore&utm_medium=social&utm_oi=37839882420224)

<!--  -->
<br>

---

<br>
<!--  -->

# Zero-cost Abstraction

E.g in PyTorch JIT: For example, if you have a loop in your model, it will get unrolled in the trace, inserting a copy of the loop body for as many times as the loop ran. This opens up opportunities for zero-cost abstraction (e.g. you can loop over modules, and the actual trace will be loop-overhead free!)

**注:** loop-overhead: 循环开销

**_References:_**

- [PyTorch Blog: The road to 1.0: production ready PyTorch - TRACING MODE](https://pytorch.org/blog/the-road-to-1_0/#tracing-mode)

- [云导播: inline 的优劣](https://m.ydaobo.com/wenzhang/84644.html)

<!--  -->
<br>

---

<br>
<!--  -->

# 深度学习框架的前端和后端

目前的深度学习框架都采用了前、后端的形式，C++作为后端，Python 作为前端

<!--  -->
<br>

---

<br>
<!--  -->

# Naming

## Blog

- [hackernoon: The art of naming variables](https://hackernoon.com/the-art-of-naming-variables-52f44de00aad)

## Naming Boolean Variable

- `is_`: 是不是
- `can_`: 能不能
- `has_`: 有没有
- `enable_`: 要不要

<!--  -->
<br>

---

<br>
<!--  -->

# InterProcess Communication (IPC)

进程间通信

机器学习模型的分布式调用系统可以基于 IPC 进行实现

RPC 是远程的 IPC 实现

**_References:_**

- [简书: 进程间通信 IPC (InterProcess Communication)](https://www.jianshu.com/p/c1015f5ffa74)

- [stackoverflow: Is there a difference between RPC and IPC?](https://stackoverflow.com/questions/2161674/is-there-a-difference-between-rpc-and-ipc)

- [CSDN: 进程间通信 IPC、LPC、RPC](https://blog.csdn.net/lanchunhui/article/details/50885423)
